<!DOCTYPE html>
<html ng-app="birdMiningApp">
<head>
    <title>Bird Mining Backoffice</title>
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <link href="styles/birdmining.css" media="all" rel="stylesheet"/>
</head>
<body ng-init>
<div class="container" ng-controller="candidateController" ng-init="preloadAndStart()">
    <div class="row">
        <div class="col-md-3">
            <!--
            <button class="btn btn-default" type="submit" ng-click="refreshCandidateList()">Get Candidates</button>
            Total candidates: {{returnTotalCandidates()}}
            -->
            <div id="tagGroup">
                <div>Birds</div>
                <div class="type" ng-repeat="bird in birds" ng-if="!birdFilter">
                    <a class="bird" ng-click="filterByBird(bird.key)">
                        <span>{{bird.name}}: </span><span>{{bird.count}}</span>
                    </a>
                </div>
                <div class="type" ng-if="!birdFilter">
                    <a class="no-location" ng-click="filterByEmptyBird()">
                        <span>Missing bird: {{missingBirds}}</span>
                    </a>
                </div>
                <div class="type" ng-if="birdFilter">
                    <span class="bird"><b>{{birdFilter.name}}</b> <a ng-click="clearBird()">Clear</a></span>
                </div>
            </div>
            <div id="tagGroup">
                <div>Locations</div>
                <div class="type" ng-repeat="location in locations" ng-if="!locationFilter">
                    <a class="location" ng-click="filterByLocation(location.key)">
                        <span>{{location.name}}: </span><span>{{location.count}}</span>
                    </a>
                </div>
                <div class="type" ng-if="!locationFilter">
                    <a class="no-location" ng-click="filterByEmptyLocation()">
                        <span>Missing location: {{missingLocations}}</span>
                    </a>
                </div>
                <div class="type" ng-if="locationFilter">
                    <span class="location"><b>{{locationFilter.name}}</b> <a ng-click="clearLocation()">Clear</a></span>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <ul class="list-group">
                <li class="list-group-item" ng-repeat="candidate in candidates">
                    <div class="title"><strong>{{candidate.id}}</strong></div>
                    <div>{{candidate.message}}</div>
                    <div class="location-box">
                        <span class="location" ng-repeat="location in candidate.locations">
                            {{location}}
                        </span>
                    </div>
                    <div class="bird-box">
                        <span class="bird" ng-repeat="bird in candidate.birds">
                            {{bird}}        
                        </span>
                    </div>
                    <div class="highlights">
                        <div class="highlight" ng-repeat="highlight in candidate.highlights" ng-bind-html="highlight">
                        </div>
                    </div>
                    <!--td>{{candidate.percolators}}</td-->
                </li>
            </ul>
        </div>
    </div>
</div>
<script src="lib/angular/angular.js"></script>
<script src="lib/angular/angular-sanitize.js"></script>
<script src="scripts/module.js"></script>
<script src="scripts/controllers.js"></script>
</body>
</html>